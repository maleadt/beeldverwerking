<!DOCTYPE html>
<!--
  Copyright 2011 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications:   Chrome DevRel Team (chrome-devrel@googlegroups.com)
                   Alex Russell (slightlyoff@chromium.org)
                   Brad Neuberg
                   Tim Besard (tim.besard@gmail.com)
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
        <title>Tram collision avoidance</title>
        <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono" rel="stylesheet" type="text/css" />
        <link href="css/moon.css" class="theme" rel="stylesheet" />
        <link href="css/sand.css" class="theme" rel="stylesheet" />
        <link href="css/sea_wave.css" class="theme" rel="stylesheet" />
        <link href="css/default.css" class="theme" rel="stylesheet" media="screen" />
    </head>
    <body>
        <div class="presentation">
            <div id="presentation-counter">Loading...</div>
            <!--
                Auxiliary styles
            -->

            <!-- Nice style to include photos and pictures -->
            <style>
              #photo {
                margin: 0 auto;
                display: block;
                border: 3px solid #ccc;
              }
              figure {
                display: block;
                text-align: center;
              }
              figcaption {
                display: block;
              }
            </style>


            <!--
                Introduction
            -->

            <div class="slides">
                <div class="slide" id="landing-slide">
                    <style>
                        #landing-slide p {
                            font-size: 35px;
                        }
                    </style>
                    <section class="middle">
                        <p>Deze presentatie is opgebouwd in HTML5</p>
                        <p>Druk op de <span id="left-init-key" class="key">&rarr;</span> toets om verder te gaan.</p>
                    </section>
                </div>

                <div class="slide" id="controls-slide">
                    <style>
                        #controls-slide li, #controls-slide p {
                            font-size: 35px;
                        }
                    </style>
                    <section>
                        <p>Presentatie controles:</p>
                        <ul>

                            <li><span class="key">&larr;</span> en <span class="key">&rarr;</span> om van slide te wisselen.</li>
                            <li><span class="key">Ctrl/Command</span> en <span class="key">+</span> of <span class="key">-</span> om in en uit te zoomen.</li>

                            <li><span class="key">T</span> om het thema te veranderen.</li>
                        </ul>
                    </section>
                </div>

                <div class="slide" id="title-slide">
                    <style>
                        #title-slide h1, #title-slide h2 {
                            color: black;
                        }
                        #title-slide h1 {
                            letter-spacing: -2px;
                            font-size: 96px;
                        }
                        #title-slide h2 {
                            margin-top: -5px;
                            font-size: 40px;
                            letter-spacing: -1px;
                        }
                    </style>
                    <section class="middle">
                        <hgroup>
                            <h1>
                                Tram collision avoidance
                            </h1>
                            <h2>
                                Tim Besard, Ruben Schollaert, Dimitri Roose, Sebastiaan Labijn
                            </h2>
                        </hgroup>
                    </section>
                </div>



                <div class="slide" id="table-of-contents">
                    <header>Today, we will cover...</header>
                    <style>
                        #toc-list > li {
                        font-size: 26px;
                        line-height: 33px;
                        opacity: 0.85;
                        }
                        #toc-list > li:hover {
                        opacity: 1;
                        }
                        #toc-list a {
                        border-bottom: 0;
                        }
                        #toc-list a:hover{
                        border-bottom: 2px solid #3f3f3f;
                        }
                        #toc-list img {
                        vertical-align: middle;
                        margin-left: 15px;
                        }
                    </style>

                    <section>
                        <ul id="toc-list">
                        </ul>
                    </section>
                </div>

                <div class="slide" id="introduction-slide">
                    <header>Tram collision avoidance</header>
                    <section>
                        <p>
                            A lot of collisions with trams
                        </p>
                        <p>
                            Causes:
                            <ul class="bullets">
                            	<li>Long stopping distance</li>
                            	<li>No way out</li>
                            </ul>
                        </p>
                        <p>
                        	Assignment: detect distance to other trams and possible collisions with other road users
                        </p>
                    </section>
                </div>
                <div class="slide" id="introduction-slide2">
                    <header>Tram collision avoidance</header>
                    <section>
                        <p>
                        	Divided into 4 work packages:
                        	<ul class="bullets">
							   <li>Track detection (Tim Besard)</li>
							   <li>Tram detection (Dimitri Roose)</li>
							   <li>Distance calculation (Sebastiaan Labijn)</li>
							   <li>Obstacle detection (Ruben Schollaert)</li>
                            </ul>
                        </p>
                    </section>
                </div>



                <!--
                    WP1 - Track detection
                -->

                <div class="slide transitionSlide" id="wp1-title">
                    <section class="middle">
                        <h2>Track detection</h2>
                        <p>Robust edge detection</p>
                    </section>
                </div>

                <!-- Similar projects -->

                <div class="slide" id="wp1-similar-slide">
                    <header>Similar projects</header>
                    <section>
                        <h2>Road lane detection</h2>
                        <p>
                            <ul class="bullets">
                                <li><strong>High-contrast image</strong>: easy edge detection</li>
                                <li><strong>Clear lane markers</strong>: feature detection</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/road lane.jpg" />
                                <figcaption>Sample picture of a road lane.</figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <!-- Issues -->

                <div class="slide" id="wp1-issues-slide">
                    <header>Issues</header>
                    <section>
                        <p>
                            Direct application of technologies won't work.
                            <ul class="bullets">
                                <li><strong>Low-contrast image</strong>: edge detection has low S/N</li>
                                <li><strong>No clear indicators</strong>: difficult feature extraction</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track issues.png" />
                                <figcaption>
                                    Sample picture of a typical tramway track. <br />
                                    <em>Note: actual input picture.</em>
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <!-- Extraction method -->

                <div class="slide" id="wp1-method-slide">
                    <header>Extraction method</header>
                    <section>
                        <p>
                            Multi-step process:
                            <ul class="bullets">
                                <li><strong>Image preprocessing</strong></li>
                                <li><strong>Edge detection</strong></li>
                                <li><strong>Line extraction</strong></li>
                                <li><strong>Track detection</strong></li>
                            </ul>
                        </p>
                        <p>
                            Based on edge detection:
                            <ul class="bullets">
                                <li><strong>Easier to tweak</strong></li>
                                <li><strong>Faster</strong></li>
                                <li><strong>Doesn't need training/input images</strong></li>
                            </ul>
                        </p>
                    </section>
                </div>

                <!-- Image preprocessing -->

                <div class="slide" id="wp1-preprocess-slide">
                    <header>Image preprocessing</header>
                    <section>
                        <p>
                            <ul class="bullets">
                                <li><strong>Conversion to grayscale</strong>: colour is quite useless</li>
                                <li>
                                    <strong>Sobel operator</strong>: X-biased, as tracks run mostly vertical <br />
                                    Bias is important: Canny detector results in <em>much</em> more data
                                </li>
                                <li><strong>Tresholding</strong>: reducing noice</li>
                                <li><strong>Cropping</strong>: removing useless regions</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track preprocessed.png" />
                                <figcaption>
                                    Result of the preprocessing step.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <!-- Line extraction -->

                <div class="slide" id="wp1-lines-slide">
                    <header>Line extraction</header>
                    <section>
                        <p>
                            <ul class="bullets">
                                <li><strong>Hough transform</strong>: results in <em>many</em> lines</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track lines.png" />
                                <figcaption>
                                    Output of the Hough transform.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <!-- Track detection -->

                <div class="slide" id="wp1-track-slide1">
                    <header>Track detection</header>
                    <section>
                        <h2>Segment classification</h2>
                        <p>
                            <ul class="bullets">
                                <li><strong>Find similar segments</strong>: close to eachother, same slope</li>
                                <li><strong>Group them together</strong></li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track grouping.png" />
                                <figcaption>
                                    Segment groups after classification.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <div class="slide" id="wp1-track-slide2">
                    <header>Track detection</header>
                    <section>
                        <h2>Group representatives</h2>
                        <p>
                            <ul class="bullets">
                                <li><strong>Calculate representative segment</strong>: averaging properties</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track representatives.png" />
                                <figcaption>
                                    Segment groups with their representatives.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <div class="slide" id="wp1-track-slide3">
                    <header>Track detection</header>
                    <section>
                        <h2>Stitching segments</h2>
                        <p>
                            Why?
                            <ul class="bullets">
                                <li><strong>Curved segments</strong></li>
                                <li><strong>Noise</strong>: breaks up straight tracks in several disconnected lines</li>
                            </ul>
                        </p>

                        <p>
                            Note: OpenCV's Hough transform does have a parameter to allow gaps, but that does increase the noise <em>enormously</em>.
                        </p>
                    </section>
                </div>

                <div class="slide" id="wp1-track-slide4">
                    <header>Track detection</header>
                    <section>
                        <h2>Stitching segments</h2>
                        <p>
                            How?
                            <ul class="bullets">
                                <li><strong>Find connected segments</strong>: endpoints close, slope difference not too big</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track stitch.png" />
                                <figcaption>
                                    Frame after stitching the group representatives.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <div class="slide" id="wp1-track-slide5">
                    <header>Track detection</header>
                    <section>
                        <h2>Track start detection</h2>
                        <p>
                            <ul class="bullets">
                                <li><strong>Vertical scanline</strong>: check intersections</li>
                                <li><strong>Validity checks</strong>: location (somewhere the middle), space between, track slope, ...</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track start.png" />
                                <figcaption>
                                    Detection of the track start.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>

                <!-- Result -->

                <div class="slide" id="wp1-result-slide">
                    <header>Result</header>
                    <section>
                        <p>
                            <ul class="bullets">
                                <li><strong>Speed</strong>: <em>fast</em>, ~10 ms (100 FPS) for 720p images</li>
                                <li><strong>Quality</strong>: quite good, but not ultimately reliable</li>
                                <li><strong>Problems</strong>: extremely low contrast, curved tracks</li>
                            </ul>
                        </p>

                        <div>
                            <figure>
                                <img id="photo" src="res/track result.png" />
                                <figcaption>
                                    Final result of the track detection, coping well with a low-contrast high-noise input.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>


                <!--
                    WP2 - Tram detection
                -->

                <div class="slide transitionSlide" id="wp2-title">
                    <section class="middle">
                        <h2>Tram detection</h2>
                        <p>Subtitle</p>
                    </section>
                </div>

                <div class="slide" id="wp2-content-slide">
                    <header>Content slides</header>
                    <section>
                        <p>
                            Blabla.
                        </p>
                    </section>
                </div>


                <!--
                    WP3 - Distance calculation
                -->

                <div class="slide transitionSlide" id="wp3-title">
                    <section class="middle">
                        <h2>Distance calculation</h2>
                        <p></p>
                    </section>
                </div>

                <div class="slide" id="wp3-alternatives">
                    <header>Alternatives</header>
                    <section>
                        <h2>Builtin OpenCV methods</h2>
                        <p>
                            <ul class="bullets">
                              <li>cv::findHomography</li>
                              <li>cv::projectPoints</li>
                              <li>cv::warpPerspective</li>
                            </ul>
                        </p>
                            <br />
                            <br />
                        
                        <center>
                        <p>
                            Missing lots of camera information
                            <br />
                            <img alt="distance_x_middle" src="res/od_downarrow.png" />      
                            <br />
                                Mathematical Solution
                        </p></center>
                    </section>
                </div>
                
                <div class="slide" id="wp3-method">
                    <header>Method</header>
                    <section data-build>
                        <p>
                            Step 1: Distance X-axis
                        </p>
                        <div style="position: absolute; left:500px; top: 125px"><strong><img src="res/distance_x_end.png" /></strong></div>
                        <p>
                            Step 2: Distance Y-axis
                        </p>
                        <div style="position: absolute; left:500px; top: 125px"><strong><img src="res/distance_y_end.png" /></strong></div>
                        <p>
                            Step 3: Total Distance
                        </p>
                        <div style="position: absolute; left:500px; top: 125px"><strong><img src="res/distance_end.png" /></strong></div>
                           
                    </section>
                </div>
                                
                <div class="slide" id="wp3-distance-x">
                    <header>Distance X-axis</header>
                    <section data-build>
                        <ul class="bullets">
                              <li>Detected positions</li>
                        </ul>                        
                        <div style="position: absolute; left:550px; top: 125px"><strong><img alt="distance_x_start" src="res/distance_x_start.png" /></strong></div>
                        
                        <ul class="bullets">
                              <li>Determine the middles</li>
                              <li>Calculate difference X</li>
                        </ul>
                        <div style="position: absolute; left:550px; top: 125px"><strong><img alt="distance_x_middle" src="res/distance_x_middle.png" /></strong></div>

                        <ul class="bullets">
                              <li>Convert pixel to real distance</li>
                              <li>Distance X-axis</li>
                        </ul>
                        <div style="position: absolute; left:550px; top: 125px"><strong><img alt="distance_x_end" src="res/distance_x_end.png" /></strong></div>
                    </section>
                </div>
                                                
                <div class="slide" id="wp3-distance-y">
                    <header>Distance Y-axis</header>
                    <section data-build>
                        <ul class="bullets">
                              <li>Detected positions</li>
                              <li>Calucate difference Y</li>
                        </ul>   
                        <div style="position: absolute; left:550px; top: 125px"><strong><img src="res/distance_x_end.png" /></strong></div>
                                                
                        <ul class="bullets">
                              <li>Calculate ratio</li>
                              <li>Calculate ratio^3</li>
                              <li>Distance Y-axis</li>
                        </ul>
                        <div style="position: absolute; left:550px; top: 125px"><strong><img src="res/distance_y_end.png" /></strong></div>
                    </section>
                </div>
                                     
                <div class="slide" id="wp3-distance-total">
                    <header>Total Distance</header>
                    <section data-build>
                        <figure style="position: absolute; left:0px; top: 180px">
                          <img src="res/distance_example_far.png" />
                          <figcaption>
						    20 m
                          </figcaption>
                        </figure>
                        <figure style="position: absolute; left:305px; top: 195px">
                          <img src="res/distance_example_middle.png" />
                          <figcaption>
						    10 m
                          </figcaption>
                        </figure>
                        <figure style="position: absolute; left:570px; top: 180px">
                          <img src="res/distance_example_close.png" />
                          <figcaption>
						    5 m
                          </figcaption>
                        </figure>
                    </section>
                </div>

                <!--
                    WP4 - Obstacle detection
                -->

                <div class="slide transitionSlide" id="wp4-title">
                    <section class="middle">
                        <h2>Obstacle detection</h2>
                        <p></p>
                    </section>
                </div>

                <div class="slide" id="wp4-content-slide">
                    <header>Obstacle detection</header>
                    <section>
                      <div>
                        <ul class="bullets">
                          <li>Pedestrians</li>
                          <li>Vehicles</li>
   					      <li>Animals</li>
 					      <li>Debrie</li>
					      <li>...</li>
                        </ul>
                        <div style="position: absolute; top:250px; right: 40px"><img src="res/od_pedestrians_on_tracks.png"/></div>
                        <div style="position: absolute; top:450px; right: 280px"><img src="res/od_vehicle_on_tracks.png"/></div>
                      </div>
                      <div data-build>
                        <div style="position: absolute; left:280px; top: 135px"><strong><img src="res/od_leftarrow.png" /></strong></div>
                        <div style="position: absolute; left:280px; top: 190px"><strong><img src="res/od_leftarrow.png" /></strong></div>
                      </div>
                    </section>
                </div>


                <div class="slide" id="wp4-pedestrians">
                    <header>Pedestrian detection</header>
                    <section>
                    	<p>
                    	<ul class="bullets">
                    	  <li>Template matching<br />&nbsp;&nbsp;&nbsp;&nbsp;no templates for people</li>
                    	  <li>Contours<br />&nbsp;&nbsp;&nbsp;&nbsp;what about groups?</li>
                    	  <li>Haar like features<br />&nbsp;&nbsp;&nbsp;&nbsp;uses real features</li>
                    	</ul>
                    	</p>
                    	<figure style="position: absolute; bottom: 30px; right: 60px">
					      <img src="res/od_people.png" />
                        <figure>
                    </section>
                </div>

                <div class="slide" id="wp4-pedestrians-haar">
                    <header>Boosted cascade of Haar-like features</header>
                    <section>
                    	<ul class="bullets">
                    		<li>Samples are created<br />&nbsp;&nbsp;&nbsp;&nbsp;createsamples (OpenCV)</li>
							<li>Feature selection by extensive training</li>
							<li>AdaBoost to select a small set of features<br />&nbsp;&nbsp;&nbsp;&nbsp;haartraining (OpenCV)</li>
							<li>Detection with sliding window</li>
                    	</ul>
                    	<figure>
                    		<img src="res/od_cascade.png" />
                    	</figure>
                    </section>
                </div>
                <div class="slide" id="wp4-pedestrians-results">
                    <header>Pedestrian detection - Results</header>
                    <section>
                        <p>
                            <ul class="bullets">
                                <li><strong>Speed</strong>: <em>slow</em>, 900 ms (1 FPS) for 720p images
                                <br />&nbsp;&nbsp;&nbsp;&nbsp;Solution:
                                <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scaling down image: 250 ms
                                <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reducing ROI: <strong>120 ms</strong> (9 FPS)
                                </li>
                                <li><strong>Quality</strong>: good, few false positives &amp; negatives</li>
                            </ul>
                        </p>
                        <figure>
                          <img src="res/od_peopledetection1.png" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="res/od_peopledetection2.png" />
                          <figcaption>
						    Final result of the pedestrian detection
                          </figcaption>
                        </figure>
                    </section>
                </div>
                <div class="slide" id="wp4-vehicle">
                    <header>Vehicle detection</header>
                    <section>
                    	<p>
                    	<ul class="bullets">
                    	  <li>Template matching<br />&nbsp;&nbsp;&nbsp;&nbsp;too much vehicle types</li>
                    	  <li>Haar like features<br />&nbsp;&nbsp;&nbsp;&nbsp;no generic features for all types of vehicles</li>
                    	  <li>Texture matching<br />&nbsp;&nbsp;&nbsp;&nbsp;low quality of images</li>
                    	  <li>Contours<br />&nbsp;&nbsp;&nbsp;&nbsp;too much vehicle types</li>
                    	  <li>Detecting wheels</li>
                    	</ul>
                    	</p>
                    </section>
                </div>
                <div class="slide" id="wp4-vehicle-wheels">
                    <header>Wheel detection</header>
                    <section>
                    	<p>
                    	Detecting ellipses
                    	<ul class="bullets">
                    		<li>RANSAC: poor success rate</li>
                    		<li>cv::findContours() + cv::fitEllipse()</li>
                    		<li>extra validations</li>
                    	</ul>
                    	</p>
                    	<figure>
                          <img src="res/od_vehicle_ellipses.png" />&nbsp;&nbsp;&nbsp;&nbsp;
                          <img src="res/od_rightarrow.png" style="padding-bottom: 100px" />&nbsp;&nbsp;&nbsp;&nbsp;
                          <img src="res/od_vehicle_wheels.png" />
                        </figure>
                    </section>
                </div>
                <div class="slide" id="wp4-vehicle-car">
                    <header>Detect car from wheels</header>
                    <section>
                      <p>
                        <ul class="bullets">
                          <li>Overlapping ellipses are merged</li>
                          <li>Two closest ellipses are grouped</li>
                          <li>Vehicles are calculated or rejected</li>
                        </ul>
                      </p>
                      <br />
                      <figure>
                        <img src="res/od_vehicle_wheel+detection.png" />
                      </figure>
                    </section>
                </div>
                <div class="slide" id="wp4-vehicle-results">
                    <header>Vehicle detection - Results</header>
                    <section>
                        <p>
                            <ul class="bullets">
                                <li><strong>Speed</strong>: <em>fast</em>, 10 ms for 720p images</li>
                                <li><strong>Quality</strong>: ok,<br />&nbsp;&nbsp;&nbsp;no detection for vehicles with more then four wheels,<br />&nbsp;&nbsp;&nbsp;not all cars are detected due to poor quality in images,<br />&nbsp;&nbsp;&nbsp;nonexistant vehicles found due to noise in the picture</li>
                            </ul>
                        </p>
                        <figure>
                          <img src="res/od_vehicle_detection.png" />
                          <img src="res/od_vehicle_detection_false.png" />
                          <figcaption>
						    Final result of the vehicle detection
                          </figcaption>
                        </figure>
                    </section>
                </div>





                <!--
                    Final application
                -->

                <div class="slide transitionSlide" id="application-title">
                    <section class="middle">
                        <h2>Final application</h2>
                        <p>Performance and intuitiveness</p>
                    </section>
                </div>

                <div class="slide" id="application-features-slide">
                    <header>Features</header>
                    <section>
                        <p>
                            <ul class="bullets">
                                <li><strong>Qt-based UI</strong>: user-friendly and native interface</li>
                                <li><strong>OpenGL</strong>: improved drawing performance</li>
                                <li><strong>OpenMP</strong>: independant parts of the components are executed in parallel</li>
                                <li><strong>Feature cache</strong>: if one component fails, others continue to work with previous data (until it expires)</li>
                            </ul>
                        </p>
                    </section>
                </div>

                <div class="slide" id="application-screenshot-slide">
                    <header>Screenshot</header>
                    <section>
                        <div>
                            <figure>
                                <img id="photo" src="res/application.png" />
                                <figcaption>
                                    The application in action.
                                </figcaption>
                            <figure>
                        </div>
                    </section>
                </div>


                <!--
                    Conclusion
                -->

                <div class="slide transitionSlide" id="conclusion-title">
                    <section class="middle">
                        <h2>Conclusion</h2>
                    </section>
                </div>

                <div class="slide" id="conclusion-slide">
                    <header>Conclusion</header>
                    <section>
                            <ul class="bullets"  data-build>
                                <li>Good results overal</li>
                                <li>Bit slow <img src="res/conclusion_rightarrow.png" /> needs tweaking</li>
                            </ul>
                    </section>
                </div>

                <div class="slide" id="end-title">
                    <style>
                        #end-title h1 {
                            color: black;
                            letter-spacing: -2px;
                            font-size: 96px;
                        }
                    </style>
                    <section class="middle">
                        <h1>Questions?</h1>
                    </section>
                </div>

            </div> <!-- slides -->

        </div> <!-- presentation -->

        <script src="slideshow.js" /> </script>
    </body>
</html>
